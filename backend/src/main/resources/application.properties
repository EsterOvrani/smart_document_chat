# ==================== Application Info ====================
spring.application.name=smart-document-chat
server.port=8080

# ==================== Database Configuration (PostgreSQL) ====================
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/smartdocumentchat}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:smartdoc_user}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:smartdoc_password}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true

# ==================== JWT Configuration ====================
security.jwt.secret-key=${JWT_SECRET_KEY:EAojdUhQeorzj9B6MFYCqzErNSY9SF+n8qj8xy2zS7c}
security.jwt.expiration-time=3600000

# ==================== Email Configuration ====================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${SUPPORT_EMAIL:ester.ovrani@gmail.com}
spring.mail.password=${APP_PASSWORD:hnpn belz gavg mxdm}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# Frontend URL (for email verification)
app.frontend.url=${FRONTEND_URL:http://localhost:3000}

# ==================== File Upload Configuration ====================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=100MB

# ==================== OpenAI Configuration ====================
openai.api.key=${OPENAI_API_KEY}
openai.embedding.model=text-embedding-3-large
openai.chat.model=gpt-4

# ==================== Qdrant Configuration ====================
qdrant.host=${QDRANT_HOST:localhost}
qdrant.port=${QDRANT_PORT:6334}
qdrant.api-key=${QDRANT_API_KEY:}
qdrant.collection-name=smart_documents

# פרמטרי חיפוש - ככל שהערכים גבוהים יותר = דיוק טוב יותר
qdrant.default-max-results=5
qdrant.default-min-score=0.75

# HNSW optimization לדיוק מקסימלי
qdrant.hnsw-m=16
qdrant.hnsw-ef-construct=200
qdrant.hnsw-ef=128

# Embedding configuration
qdrant.dimension=3072
qdrant.distance=Cosine

# ==================== AWS S3 Configuration ====================
aws.s3.access-key=${AWS_ACCESS_KEY_ID}
aws.s3.secret-key=${AWS_SECRET_ACCESS_KEY}
aws.s3.region=${AWS_REGION:us-east-1}
aws.s3.bucket-name=${AWS_S3_BUCKET}


# ==================== Async Configuration ====================
spring.task.execution.pool.core-size=5
spring.task.execution.pool.max-size=10
spring.task.execution.pool.queue-capacity=100

# ==================== Logging Configuration ====================
logging.level.root=INFO
logging.level.com.example.backend=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.io.qdrant=DEBUG

# ==================== CORS Configuration ====================
cors.allowed-origins=http://localhost:3000,http://localhost

# ==================== Cache Configuration ====================
spring.cache.type=simple

# ==================== Jackson Configuration ====================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=Asia/Jerusalem

# ==================== Redis Configuration ====================
# Redis connection settings
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.timeout=2000ms

# Lettuce connection pool settings
# Max active connections
spring.data.redis.lettuce.pool.max-active=8
# Max idle connections
spring.data.redis.lettuce.pool.max-idle=8
# Min idle connections
spring.data.redis.lettuce.pool.min-idle=2

# Cache Configuration
spring.cache.type=redis
# Default TTL: 1 hour (in milliseconds)
spring.cache.redis.time-to-live=3600000
# Don't cache null values
spring.cache.redis.cache-null-values=false
# Use key prefix for namespacing
spring.cache.redis.use-key-prefix=true
# Prefix for all cache keys
spring.cache.redis.key-prefix=smartdoc:

# Cache Names (for monitoring and management)
spring.cache.cache-names=chatMessages,recentMessages,chatDetails,userChats

# ==================== Test Mode Configuration ====================
# ⚠️ NEVER enable in production!
app.test-mode.enabled=${TEST_MODE_ENABLED:false}
app.test-mode.bypass-email-verification=${BYPASS_EMAIL_VERIFICATION:false}
app.test-mode.fixed-verification-code=999999