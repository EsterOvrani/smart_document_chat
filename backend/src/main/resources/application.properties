# ==================== Application Info ====================
spring.application.name=smart-document-chat

# ==================== Server Configuration ====================
server.port=${SERVER_PORT:8080}

# ==================== Database Configuration ====================
#   注专 注 -ENV,  专转 拽砖转!
spring.datasource.url=jdbc:postgresql://${POSTGRES_HOST:localhost}:${POSTGRES_PORT:5432}/${POSTGRES_DB:smartdocumentchat}
spring.datasource.username=${POSTGRES_USER}
spring.datasource.password=${POSTGRES_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true

# ==================== Security - JWT ====================
security.jwt.secret-key=${JWT_SECRET_KEY}
security.jwt.expiration-time=${JWT_EXPIRATION_MS:3600000}

# ==================== Email Configuration ====================
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# Frontend URL for email verification links
app.frontend.url=${FRONTEND_URL:http://localhost:3000}

# ==================== File Upload Configuration ====================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=100MB

# ==================== OpenAI Configuration ====================
openai.api.key=${OPENAI_API_KEY}
openai.embedding.model=text-embedding-3-large
openai.chat.model=gpt-4

# ==================== Qdrant Configuration ====================
qdrant.host=${QDRANT_HOST:localhost}
qdrant.port=${QDRANT_GRPC_PORT:6334}
qdrant.api-key=${QDRANT_API_KEY:}

# Qdrant Search Parameters
qdrant.default-max-results=${QDRANT_DEFAULT_MAX_RESULTS:5}
qdrant.default-min-score=${QDRANT_DEFAULT_MIN_SCORE:0.75}

# Qdrant HNSW Optimization
qdrant.hnsw-m=${QDRANT_HNSW_M:16}
qdrant.hnsw-ef-construct=${QDRANT_HNSW_EF_CONSTRUCT:200}
qdrant.hnsw-ef=${QDRANT_HNSW_EF:128}

# Qdrant Embedding Configuration
qdrant.dimension=${QDRANT_DIMENSION:3072}
qdrant.distance=${QDRANT_DISTANCE:Cosine}

# ==================== AWS S3 Configuration ====================
aws.s3.access-key=${AWS_ACCESS_KEY_ID}
aws.s3.secret-key=${AWS_SECRET_ACCESS_KEY}
aws.s3.region=${AWS_REGION:us-east-1}
aws.s3.bucket-name=${AWS_S3_BUCKET}
aws.s3.endpoint=${AWS_S3_ENDPOINT:}

# ==================== Redis Configuration ====================
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.timeout=2000ms

# Redis Connection Pool
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=2

# Cache Configuration
spring.cache.type=redis
spring.cache.redis.time-to-live=3600000
spring.cache.redis.cache-null-values=false
spring.cache.redis.use-key-prefix=true
spring.cache.redis.key-prefix=smartdoc:
spring.cache.cache-names=chatMessages,recentMessages,chatDetails,userChats

# ==================== Google OAuth2 ====================
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET}
spring.security.oauth2.client.registration.google.scope=profile,email
spring.security.oauth2.client.registration.google.redirect-uri={baseUrl}/auth/google/callback

spring.security.oauth2.client.provider.google.authorization-uri=https://accounts.google.com/o/oauth2/v2/auth
spring.security.oauth2.client.provider.google.token-uri=https://oauth2.googleapis.com/token
spring.security.oauth2.client.provider.google.user-info-uri=https://www.googleapis.com/oauth2/v3/userinfo
spring.security.oauth2.client.provider.google.user-name-attribute=sub

# ==================== Test Mode Configuration ====================
app.test-mode.enabled=${TEST_MODE_ENABLED:false}
app.test-mode.bypass-email-verification=${BYPASS_EMAIL_VERIFICATION:false}
app.test-mode.fixed-verification-code=${FIXED_VERIFICATION_CODE:999999}

# ==================== Async Configuration ====================
spring.task.execution.pool.core-size=5
spring.task.execution.pool.max-size=10
spring.task.execution.pool.queue-capacity=100

# ==================== Logging Configuration ====================
logging.level.root=INFO
logging.level.com.example.backend=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.io.qdrant=DEBUG

# ==================== Jackson Configuration ====================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=Asia/Jerusalem